<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>How I Host This Website</title>
		<link rel="icon" href="data:," />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="/assets/css/styles.css" />
		<!-- Begin Jekyll SEO tag v2.7.1 -->
		<title>How I Host This Website</title>
		<meta name="generator" content="Jekyll v4.2.0" />
		<meta property="og:title" content="How I Host This Website" />
		<meta name="author" content="mfrancis" />
		<meta property="og:locale" content="en_US" />
		<meta
			name="description"
			content="How I host this website, briefly explained."
		/>
		<meta
			property="og:description"
			content="How I host this website, briefly explained."
		/>
		<meta property="og:type" content="article" />
		<meta
			property="article:published_time"
			content="2021-03-19T00:00:00+00:00"
		/>
		<meta name="twitter:card" content="summary" />
		<meta property="twitter:title" content="How I Host This Website" />
		<script type="application/ld+json">
			{
				"headline": "How I Host This Website",
				"description": "How I host this website, briefly explained.",
				"dateModified": "2021-03-19T00:00:00+00:00",
				"datePublished": "2021-03-19T00:00:00+00:00",
				"mainEntityOfPage": {
					"@type": "WebPage",
					"@id": "/2021/03/19/How-I-host-this-website/"
				},
				"url": "/2021/03/19/How-I-host-this-website/",
				"author": { "@type": "Person", "name": "mfrancis" },
				"@type": "BlogPosting",
				"@context": "https://schema.org"
			}
		</script>
		<!-- End Jekyll SEO tag -->

		<script src="/assets/js/font-awesome-d7744ff4d4.js"></script>
		<script src="/assets/js/prism.js"></script>

		<script src="https://www.gstatic.com/firebasejs/8.3.0/firebase-app.js"></script>
		<script src="https://www.gstatic.com/firebasejs/8.3.0/firebase-analytics.js"></script>
		<script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-performance.js"></script>
		<script>
			var firebaseConfig = {
				apiKey: "AIzaSyD7WemzPpRYZqod1BdnqClU5v6X4ltZwSM",
				authDomain: "mfrancis-dev.firebaseapp.com",
				projectId: "mfrancis-dev",
				storageBucket: "mfrancis-dev.appspot.com",
				messagingSenderId: "968126211361",
				appId: "1:968126211361:web:0555aaf118b28329d44a60",
				measurementId: "G-9NH3W0MKEE",
			};
			firebase.initializeApp(firebaseConfig);
			firebase.analytics();
			var perf = firebase.performance();
		</script>
	</head>

	<body>
		<div class="container-wrapper">
			<div class="content-wrapper">
				<div class="post">
					<h1>How I Host This Website</h1>
					<div class="metadata">MFRANCIS 19 Mar 2021</div>
					<div class="content">
						<p>How I host this website, briefly explained.</p>

						<h2>The Code</h2>

						<p>
							This is a static website built using
							<a href="https://jekyllrb.com/">Jekyll</a>, which I came to learn
							is a great tool for building static websites because development
							is fast and responsive. The site can be served locally for an
							immediate feedback loop:
						</p>
						<div class="language-plaintext highlighter-rouge">
							<div class="highlight">
								<pre
									class="highlight"
								><code>bundle exec jekyll serve --livereload
</code></pre>
							</div>
						</div>

						<p>
							The source code is stored in a public GitHub repository so feel
							free to take a look.
						</p>

						<p>
							I’m using GitHub Actions for the CI/CD pipeline to automatically
							build and deploy this site to its hosting servers upon merge on
							<code class="language-plaintext highlighter-rouge">main</code>.
							The pipeline can also be examined in the source code.
						</p>

						<h2>Domain Name</h2>

						<p>
							The main idea of a name system is to provide a way to identify
							devices using names that make sense to humans. I for sure don’t
							want to remember the IP addresses hosting this website so let’s
							pick a registrar and register with DNS to let our machines do the
							work for us.
						</p>

						<p>
							I’ve chosen
							<a href="https://domains.google.com">Google Domains</a>. We can
							see this by querying DNS:
						</p>

						<pre
							class="command-line language-bash"
							data-user="martin"
							data-host="sentry"
							data-output="2"
						>
<code>whois mfrancis.dev | grep Registrar:
Registrar: Google LLC.</code>
</pre>

						<p>
							Great. Now we need some IP address(-es) we can use in our resource
							records.
						</p>

						<h2>Firebase</h2>

						<p>
							They say Firebase is there to help both small and large
							enterprises to run their apps. I can’t say I’m the target
							audience… however given their Free Plan I won’t say no to at least
							trying it out – which I suppose is the point :).
						</p>

						<p>
							I was pleasantly surprised how easy and seamless it was to onboard
							Firebase. I used their CLI to setup the project in a matter of
							minutes. You can follow the
							<a href="https://firebase.google.com/docs/web/setup"
								>setup guide</a
							>
							to try this out for yourself.
						</p>

						<p>
							I have configured Firebase to deploy the contents of
							<code class="language-plaintext highlighter-rouge">_site</code> –
							the Jekyll build output directory. After doing a build locally we
							can emulate what Firebase thinks the website looks like according
							to the build artefacts:
						</p>

						<div class="language-plaintext highlighter-rouge">
							<div class="highlight">
								<pre class="highlight"><code>firebase emulators:start
</code></pre>
							</div>
						</div>

						<p>
							Upon initialisation Firebase helped generate the GitHub Actions
							file which I used as a basis to setup automated build &amp;
							deploy, however I needed to tweak this – specifically the build
							stage – to make it work with Jekyll. It paid off quickly though as
							the automated pipeline builds and deploys to Firebase upon a merge
							on <code class="language-plaintext highlighter-rouge">main</code>.
							Sweet.
						</p>

						<p>
							Firebase also makes it straightforward to integrate its Hosting
							with my domain by giving me two IPv4 addresses I can use. We can
							verify that by looking it up in DNS:
						</p>

						<pre
							class="command-line language-bash"
							data-user="martin"
							data-host="sentry"
							data-output="2-3"
						>
<code>host mfrancis.dev
mfrancis.dev has address 151.101.1.195
mfrancis.dev has address 151.101.65.195</code>
</pre>

						<p>
							For now I’m only using Firebase Hosting and Firebase Analytics but
							I’m pleased with the experience and tooling so far.
						</p>

						<h2>GitHub Pages</h2>

						<p>
							This is a simple and straightforward one. As I was looking for
							ways to build Jekyll using GitHub Actions I came across
							<a href="https://github.com/limjh16/jekyll-action-ts"
								>github.com/limjh16/jekyll-action-ts</a
							>. Anyone on GitHub Free can host their public GitHub repositories
							on GitHub Pages.
						</p>

						<p>
							Similarly to the setup with Firebase we can use GitHub Actions to
							build &amp; deploy to GitHub Pages automatically.
						</p>

						<p>
							By default the hosted site is accessible under
							<code class="language-plaintext highlighter-rouge"
								>m-francis.github.io</code
							>
							though it would be nicer if it was under
							<code class="language-plaintext highlighter-rouge"
								>mfrancis.dev</code
							>
							instead. GitHub Pages expects custom domains to have a CNAME
							definition in DNS; unfortunately we can’t add CNAME records, and
							keep Firebase IPs, for the root domain so I’ve defined a subdomain
							instead. We can verify this:
						</p>

						<pre
							class="command-line language-bash"
							data-user="martin"
							data-host="sentry"
							data-output="2-6"
						>
<code>host gh-pages.mfrancis.dev
gh-pages.mfrancis.dev is an alias for m-francis.github.io.
m-francis.github.io has address 185.199.108.153
m-francis.github.io has address 185.199.109.153
m-francis.github.io has address 185.199.110.153
m-francis.github.io has address 185.199.111.153</code>
</pre>

						<h2>Summary</h2>

						<p>
							Static website built using Jekyll. Source code and CI/CD pipeline
							in GitHub. Hosting done with Firebase and GitHub Pages.
						</p>
					</div>
				</div>
			</div>
			<footer>
				<div class="footer-left">
					Build executed on 2023-09-16 06:20:24 +0000
				</div>
				<div class="footer-right">
					<a href="https://www.github.com/m-francis"
						><i class="fab fa-github fa-2x"></i
					></a>
				</div>
			</footer>
		</div>
	</body>
</html>
